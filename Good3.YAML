mixed-port: 7890
allow-lan: true
mode: rule
log-level: info
ipv6: true

external-controller: 127.0.0.1:9090

dns:
  enable: true
  listen: 0.0.0.0:1053
  ipv6: true
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  nameserver:
    - https://dns.google/dns-query
    - https://cloudflare-dns.com/dns-query
  fallback:
    - tls://1.1.1.1:853
    - tls://8.8.8.8:853

proxy-providers:

  sub1:
    type: http
    url: https://raw.githubusercontent.com/PuddinCat/BestClash/refs/heads/main/proxies.yaml
    interval: 1800
    path: ./providers/sub1.yaml
    health-check:
      enable: true
      interval: 600
      url: https://www.gstatic.com/generate_204

  sub2:
    type: http
    url: https://raw.githubusercontent.com/anaer/Sub/main/clash.yaml
    interval: 1800
    path: ./providers/sub2.yaml
    health-check:
      enable: true
      interval: 600
      url: https://www.gstatic.com/generate_204

  sub3:
    type: http
    url: https://raw.githubusercontent.com/ermaozi/get_subscribe/main/subscribe/clash.yml
    interval: 1800
    path: ./providers/sub3.yaml
    health-check:
      enable: true
      interval: 600
      url: https://www.gstatic.com/generate_204

  sub4:
    type: http
    url: https://raw.githubusercontent.com/vxiaov/free_proxies/main/clash/clash.provider.yaml
    interval: 1800
    path: ./providers/sub4.yaml
    health-check:
      enable: true
      interval: 600
      url: https://www.gstatic.com/generate_204

proxy-groups:

  - name: AUTO_FAST
    type: url-test
    use:
      - sub1
      - sub2
      - sub3
      - sub4
    url: https://www.gstatic.com/generate_204
    interval: 300

  - name: PROXY
    type: select
    proxies:
      - AUTO_FAST
      - DIRECT

  - name: OPENAI
    type: select
    use:
      - sub1
      - sub2
      - sub3
      - sub4

  - name: NETFLIX
    type: select
    use:
      - sub1
      - sub2
      - sub3
      - sub4

rules:
  - DOMAIN-SUFFIX,openai.com,OPENAI
  - DOMAIN-SUFFIX,chatgpt.com,OPENAI
  - DOMAIN-SUFFIX,netflix.com,NETFLIX
  - DOMAIN-SUFFIX,netflix.net,NETFLIX
  - GEOIP,CN,DIRECT
  - MATCH,PROXY
